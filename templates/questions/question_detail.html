{% extends 'base.html' %}

{% block content %}
<div class="row mb-3">
  <div class="col-6">
    <a href="{% url 'questions:list' %}" class="btn btn-outline-primary">
      <i class="fas fa-angle-left fa-xs"></i>
      Back
    </a>
  </div>
  <div class="col-6 text-right">
    <a href="{% url 'questions:update' question.pk %}" class="btn btn-outline-primary">
      Update Question
    </a>
    <a href="{% url 'questions:choice_create' question.pk %}" class="btn btn-outline-primary">
      Add Choice
    </a>
  </div>
</div>

<div class="row">
  <div class="col-12">
    <div class="card">
      <div class="card-header">
        <div class="row">
          <div class="col-12"><b>{{ question.created_by }} | {{ question.created_at }}</b></div>
        </div>
      </div>
      <div class="card-body">
        {{ question.question|safe }}
      </div>
    </div>
  </div>
</div>

{% for choice in question.choices.all %}
<div class="row mt-3">
  <div class="col-12">
    <div
      class="card {% if choice.is_correct %}card-accent-success{% endif %}"
    >
      <div class="card-header">
        <div class="row">
          <div class="col-12 text-right">
              <a href="{% url 'questions:choice_update' question.pk choice.pk %}" class="btn btn-outline-primary">
                <i class="fas fa-pencil-alt fa-xs"></i>
              </a>
            <a href="#"
                class="btn btn-outline-danger"
                onclick="document.getElementById('delete-{{ forloop.counter }}').submit()"
              >
              <i class="fas fa-trash fa-xs"></i>
            </a>
            <form
              action="{% url 'questions:choice_delete' question.pk choice.pk %}"
              id="delete-{{ forloop.counter }}"
              method="post"
                style="display:none"
            >
              {% csrf_token %}
            </form>
          </div>
        </div>
      </div>
      <div class="card-body">
        {{ choice.choice|safe }}
      </div>
    </div>
  </div>
</div>
{% endfor %}
{% endblock content %}
